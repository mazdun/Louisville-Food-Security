---
title: "Louisville Food Security"
output: 
  html_document:
    self_contained: no
    toc: true
    toc_float: true
    code_folding: hide
knit: (function(inputFile, encoding) { rmarkdown::render(inputFile, encoding = encoding, output_file = file.path(dirname(inputFile), 'index.html')) })
---
Measuring food insecurity accurately and completely is challenging because it touches on a number of difficult-to-measure factors like poverty, unemployment, median income, disability status and many other factors. Furthermore, those who are considered food insecure at one point might not be food insecure at other points in the year. Often, individuals must make difficult trade off decisions between paying housing or medical bills and buying nutritious food.

However, gaining a clear understanding of a community’s food environment is essential to boosting that community’s social, health and economic health. 

We will look at three broad categories to gain a deeper understanding of the food ecosystem in Louisville and its peer cities:

* **Food Insecurity** (percentage of the population who did not have reliable access to food over the past year)
* **Food Access** (percentage of the population who had some barrier to accessing food over the past year — income constraints, limited vehicle access, etc.)
* **Food Environment** (concentration of places to buy healthy food in Louisville and its peer cities)

```{r setup, message=FALSE, warning=FALSE}
library(glptools)
library(glpdata)
glp_load_packages(graphs = T)
showtext_auto()
font_add("Museo Sans", "MuseoSans_300.otf")
font_add("Museo Sans 300 Italic", "MuseoSans_300_Italic.otf")
knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, 
                      dev.args=list(bg="transparent"), fig.width=30, fig.height=24)


```

## Food Insecurity {.tabset}

### Ranking
```{r food insecurity ranking}
load("intermediate_data/food_security_county.rda")

this_title <- "Food Insecurity"
this_caption <- "\n\nData from Feeding America's annual Map the Meal Gap study, 2021"
this_caption_trend_graphs <- "\n\nData from Feeding America's annual Map the Meal Gap study"

glptools::ranking(
  food_security_county,
  food_insecurity,
  year = 2021,
  peers = "Current",
  order = "Ascending",
  y_title = "Percent experiencing food insecurity",
  plot_title = this_title %p% ", 2021",
  caption_text = this_caption,
  bar_label = TRUE,
  sigfig = 3,
  accuracy = 0.1,
  alternate_text = NULL,
  ranking_colors = TRUE)

```

### Trend
```{r food insecurity trend}
this_title <- "Food Insecurity"
this_caption <- "\n\nData from Feeding America's annual Map the Meal Gap study, 2021"
this_caption_trend_graphs <- "\n\nData from Feeding America's annual Map the Meal Gap study"


glptools::trend(
  food_security_county,
  food_insecurity,
  rollmean = 3,
  plot_title = this_title,
  caption_text = this_caption_trend_graphs,
  y_title = "Percent")
```

### Best and Worst Performers
```{r food insecurity best and worst, results='hide'}
this_title <- "Food Insecurity"
this_caption <- "\n\nData from Feeding America's annual Map the Meal Gap study, 2021"
this_caption_trend_graphs <- "\n\nData from Feeding America's annual Map the Meal Gap study"


glptools::trend_maxmin(
  food_security_county,
  food_insecurity,
  zero_start = T,
  rollmean = 3,
  order='Ascending',
  y_title = "Percentage points change",
  plot_title = this_title,
  caption_text = this_caption_trend_graphs)
```
